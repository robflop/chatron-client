<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Chatron</title>
		<link rel="stylesheet" href="./index.css">
		<script src="https://unpkg.com/vue"></script>
	</head>

	<body>
		<div id="app">
			<div id="login-wrapper" v-if="!loggedIn">
				<form id="login" method="post">
					<label for="username-input">Username: </label>
					<input id="username-input" type="text" v-model.trim="username">
					<div style="color:red;"><span v-if="!checkUsername()">Username must be between 2 and 32 characters.</span></div>
					<label for="channels-input">Channels: </label>
					<input id="channels-input" type="text" v-model.trim="channels">
					<div style="color:red;"><span v-if="!checkChannels()">Whitespace-seperated channel names (2-32 chars per name) must be provided.</span></div>
					<label for="server-input">ServerIP : Port </label>
					<input id="server-input" type="text" v-model.trim="server">
					<div style="color:red;"><span v-if="!checkServer()">Server address must be provided.</span></div>
					<input id="login-submit" type="submit" value="Login" @click.prevent="login()">
					<div style="color:green;"><span v-if="loggedIn">Successfully logged in.</span></div>
				</form>
				<!-- TODO: move all these buttons to the actual chat window etc -->
				<button id="logout" type="button" @click="logout()">Log out</button>
				<div id="logout-notification"></div>
				<br>
				<br>
				<button id="join-channel" type="button" @click="joinChannel()">Join a channel</button>
				<button id="leave-channel" type="button" @click="leaveChannel()">Leave a channel</button>
			</div>

			<div id="chat-wrapper" v-if="loggedIn">
				<div id="title-bar-wrapper">
					<div id="title-bar">
						<p> <!-- something here --> </p>
					</div>
				</div>
				<div id="main">
					<div id="channel-list-wrapper">
						<ul id="channel-list">
							<li v-for="channel in user.channels" @click="switchChannel(channel.name)"> ðŸ’¬ {{ channel.name }} </li>
						</ul>
					</div>
					<div id="user-list-wrapper">
						<ul id="user-list">
							<li v-for="user in user.channels[selectedChannel]"> {{ user.username }} </li>
						</ul>
					</div>
					<div id="chat-area-wrapper">
						<div id="chat-area">
							<p> <!-- things here --> </p>
						</div>
					</div>
				</div>
			</div>
		</div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.2/socket.io.slim.js"></script>
		<script src="index.js"></script>
	</body>
</html>

